# Benchmark suite for SuperKMeans

# Common benchmark dependencies
set(BENCH_COMMON_LIBS
    ${BLAS_LINK_LIBRARIES}
    faiss
)

if (FFTW_FOUND)
    message(STATUS "Linking FFTW: ${FFTW_FLOAT_THREADS_LIB}")
    list(APPEND BENCH_COMMON_LIBS ${FFTW_FLOAT_LIB} ${FFTW_FLOAT_THREADS_LIB})
endif()

# Main benchmark: KMeans performance with synthetic data (vs FAISS)
add_executable(bench_kmeans.out bench_kmeans.cpp)
target_link_libraries(bench_kmeans.out PRIVATE ${BENCH_COMMON_LIBS})

# Real datasets benchmark (requires dataset files generated by bench_gen.py)
add_executable(bench_real_datasets.out bench_real_datasets.cpp)
target_link_libraries(bench_real_datasets.out PRIVATE ${BENCH_COMMON_LIBS})

# SuperKMeans benchmark on real datasets with recall computation
add_executable(end_to_end_superkmeans.out end_to_end_superkmeans.cpp)
target_link_libraries(end_to_end_superkmeans.out PRIVATE ${BENCH_COMMON_LIBS})

# FAISS benchmark on real datasets with recall computation
add_executable(end_to_end_faiss.out end_to_end_faiss.cpp)
target_link_libraries(end_to_end_faiss.out PRIVATE faiss ${BENCH_COMMON_LIBS})

# Early termination benchmarks
add_executable(early_termination_superkmeans.out early_termination_superkmeans.cpp)
target_link_libraries(early_termination_superkmeans.out PRIVATE ${BENCH_COMMON_LIBS})

add_executable(early_termination_faiss.out early_termination_faiss.cpp)
target_link_libraries(early_termination_faiss.out PRIVATE faiss ${BENCH_COMMON_LIBS})
